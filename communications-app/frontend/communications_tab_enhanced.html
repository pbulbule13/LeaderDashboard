<!-- Enhanced Communications Tab with Gmail Integration, Drafts, Calendar, Go-to-Human -->
<div id="content-email" class="tab-content hidden fade-in">
    <div class="mb-4 flex justify-between items-center">
        <h2 class="text-2xl font-bold text-gray-900">ğŸ“¬ Communications Center</h2>
        <div class="flex gap-2">
            <button onclick="refreshCommunications()"
                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-semibold text-sm">
                ğŸ”„ Refresh All
            </button>
            <button onclick="goToHuman('general', 'General Inquiry')"
                class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded font-semibold text-sm">
                ğŸ‘¤ Contact Human
            </button>
        </div>
    </div>

    <div class="grid grid-cols-12 gap-6">
        <!-- Left Column: Email Categories & List -->
        <div class="col-span-5">
            <!-- Category Filters -->
            <div class="bg-white border border-gray-200 rounded-xl shadow-sm p-4 mb-4">
                <h3 class="font-bold text-gray-800 mb-3">ğŸ“‚ Categories</h3>
                <div class="flex flex-wrap gap-2">
                    <button onclick="switchCategory('all')"
                        id="cat-all"
                        class="category-tab px-3 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800 transition-all">
                        All <span id="badge-all" class="ml-1 bg-white px-1.5 rounded-full">0</span>
                    </button>
                    <button onclick="switchCategory('urgent')"
                        id="cat-urgent"
                        class="category-tab px-3 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 hover:bg-red-50 transition-all">
                        ğŸš¨ Urgent <span id="badge-urgent" class="ml-1 bg-white px-1.5 rounded-full">0</span>
                    </button>
                    <button onclick="switchCategory('work')"
                        id="cat-work"
                        class="category-tab px-3 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 hover:bg-blue-50 transition-all">
                        ğŸ’¼ Work <span id="badge-work" class="ml-1 bg-white px-1.5 rounded-full">0</span>
                    </button>
                    <button onclick="switchCategory('personal')"
                        id="cat-personal"
                        class="category-tab px-3 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 hover:bg-green-50 transition-all">
                        ğŸ‘¤ Personal <span id="badge-personal" class="ml-1 bg-white px-1.5 rounded-full">0</span>
                    </button>
                    <button onclick="switchCategory('promotions')"
                        id="cat-promotions"
                        class="category-tab px-3 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 hover:bg-purple-50 transition-all">
                        ğŸ Promo <span id="badge-promotions" class="ml-1 bg-white px-1.5 rounded-full">0</span>
                    </button>
                    <button onclick="switchCategory('social')"
                        id="cat-social"
                        class="category-tab px-3 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 hover:bg-indigo-50 transition-all">
                        ğŸ‘¥ Social <span id="badge-social" class="ml-1 bg-white px-1.5 rounded-full">0</span>
                    </button>
                </div>
            </div>

            <!-- Email List -->
            <div class="bg-white border border-gray-200 rounded-xl shadow-sm">
                <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="font-bold text-gray-800">ğŸ“¨ Inbox</h3>
                    <span class="text-xs text-gray-600">Connected to Gmail âœ“</span>
                </div>
                <div id="email-list" class="max-h-[700px] overflow-y-auto">
                    <!-- Emails will be loaded dynamically -->
                    <div class="p-6 text-center">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"></div>
                        <p class="text-sm text-gray-600">Loading emails from Gmail...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Middle Column: Drafts & Approvals -->
        <div class="col-span-4">
            <!-- Drafts Pending Approval -->
            <div class="bg-white border border-gray-200 rounded-xl shadow-sm mb-4">
                <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="font-bold text-gray-800">âœï¸ Pending Drafts</h3>
                    <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded font-semibold">AI Generated</span>
                </div>
                <div id="drafts-list" class="max-h-[400px] overflow-y-auto">
                    <!-- Drafts will be loaded dynamically -->
                    <div class="p-6 text-center">
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"></div>
                        <p class="text-sm text-gray-600">Loading drafts...</p>
                    </div>
                </div>
            </div>

            <!-- Calendar Widget -->
            <div class="bg-white border border-gray-200 rounded-xl shadow-sm">
                <div class="p-4 border-b border-gray-200">
                    <h3 class="font-bold text-gray-800">ğŸ“… Today's Calendar</h3>
                </div>
                <div class="p-4 max-h-[300px] overflow-y-auto">
                    <div class="space-y-2">
                        <!-- Today's Events -->
                        <div class="bg-blue-50 border-l-4 border-blue-500 p-3 rounded">
                            <div class="flex gap-2 items-start">
                                <span class="text-xs font-semibold text-blue-700 w-16">9:00 AM</span>
                                <div class="flex-1">
                                    <p class="text-xs font-semibold text-gray-900">Team Standup</p>
                                    <p class="text-xs text-gray-600">Virtual - 30 min</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-blue-50 border-l-4 border-blue-500 p-3 rounded">
                            <div class="flex gap-2 items-start">
                                <span class="text-xs font-semibold text-blue-700 w-16">11:30 AM</span>
                                <div class="flex-1">
                                    <p class="text-xs font-semibold text-gray-900">Executive Review</p>
                                    <p class="text-xs text-gray-600">Conference Room A</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-blue-50 border-l-4 border-blue-500 p-3 rounded">
                            <div class="flex gap-2 items-start">
                                <span class="text-xs font-semibold text-blue-700 w-16">2:00 PM</span>
                                <div class="flex-1">
                                    <p class="text-xs font-semibold text-gray-900">Client Call</p>
                                    <p class="text-xs text-gray-600">Zoom - 1 hour</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Quick Actions & AI Status -->
        <div class="col-span-3">
            <!-- AI Assistant Status -->
            <div class="bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-xl shadow-sm p-4 mb-4">
                <h3 class="font-bold text-purple-900 mb-3">ğŸ¤– AI Assistant Status</h3>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-700">Gmail:</span>
                        <span class="text-green-600 font-semibold">âœ“ Connected</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-700">Voice Agent:</span>
                        <span class="text-green-600 font-semibold">âœ“ Active</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-700">Calendar:</span>
                        <span class="text-green-600 font-semibold">âœ“ Synced</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-700">Drafts Pending:</span>
                        <span class="text-yellow-600 font-semibold" id="drafts-pending-count">Loading...</span>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="bg-white border border-gray-200 rounded-xl shadow-sm p-4 mb-4">
                <h3 class="font-bold text-gray-800 mb-3">âš¡ Quick Actions</h3>
                <div class="space-y-2">
                    <button onclick="refreshCommunications()"
                        class="w-full bg-blue-50 hover:bg-blue-100 text-blue-700 p-3 rounded text-sm font-semibold border border-blue-200">
                        ğŸ”„ Refresh Inbox
                    </button>
                    <button onclick="alert('Compose new email feature coming soon!')"
                        class="w-full bg-green-50 hover:bg-green-100 text-green-700 p-3 rounded text-sm font-semibold border border-green-200">
                        âœï¸ Compose New
                    </button>
                    <button onclick="goToHuman('urgent-help', 'Urgent Assistance')"
                        class="w-full bg-purple-50 hover:bg-purple-100 text-purple-700 p-3 rounded text-sm font-semibold border border-purple-200">
                        ğŸ‘¤ Get Human Help
                    </button>
                    <button onclick="alert('AI Auto-draft will analyze your inbox and draft responses')"
                        class="w-full bg-yellow-50 hover:bg-yellow-100 text-yellow-700 p-3 rounded text-sm font-semibold border border-yellow-200">
                        ğŸ¤– Auto-Draft Replies
                    </button>
                </div>
            </div>

            <!-- Human Escalation Info -->
            <div class="bg-amber-50 border border-amber-200 rounded-xl shadow-sm p-4">
                <h3 class="font-bold text-amber-900 mb-2">ğŸ‘¤ Human Support</h3>
                <p class="text-xs text-gray-700 mb-3">
                    Need human review? Click "Contact Human" or "Escalate" on any email.
                </p>
                <div class="text-xs space-y-1">
                    <p class="text-gray-600">â€¢ Response time: 2-4 hours</p>
                    <p class="text-gray-600">â€¢ 24/7 availability</p>
                    <p class="text-gray-600">â€¢ Expert review team</p>
                </div>
            </div>
        </div>
    </div>
</div>
